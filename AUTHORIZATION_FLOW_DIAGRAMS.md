# ğŸ“Š Authorization Flow Diagram - Pengadaan Pemasok Access

## ğŸ¯ Overview Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PENGADAAN WORKFLOW                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  CREATE PAGE     â”‚         â”‚   EDIT PAGE      â”‚          â”‚
â”‚  â”‚  (Buat Baru)     â”‚         â”‚   (Ubah Existing)â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚           â”‚                           â”‚                     â”‚
â”‚           â”‚                           â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  Authorization    â”‚      â”‚   Authorization      â”‚        â”‚
â”‚  â”‚  Check:           â”‚      â”‚   Check:             â”‚        â”‚
â”‚  â”‚  - Role (R04/R09) â”‚      â”‚   - Role (R04/R09)   â”‚        â”‚
â”‚  â”‚  - Item Type      â”‚      â”‚   - Status = disetujui       â”‚
â”‚  â”‚  (bahan_baku)     â”‚      â”‚   - Item Type = bahan_baku   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚           â”‚                           â”‚                     â”‚
â”‚           â”‚ YES â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚ YES                 â”‚
â”‚           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                     â”‚
â”‚           â”‚               â”‚           â”‚                     â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”‚                     â”‚
â”‚    â”‚  Show     â”‚    â”‚  Show      â”‚   â”‚                     â”‚
â”‚    â”‚  Dropdown â”‚    â”‚  Dropdown  â”‚   â”‚                     â”‚
â”‚    â”‚  (editable)    â”‚  (editable)â”‚   â”‚                     â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚                     â”‚
â”‚           â”‚                          â”‚                     â”‚
â”‚    NO â—„â”€â”€â”€â”¤                          NO â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚           â”‚                                           â”‚    â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”  â”‚
â”‚    â”‚  Show Warning     â”‚                  â”‚  Show      â”‚  â”‚
â”‚    â”‚  Panel + Info     â”‚                  â”‚  Read-only â”‚  â”‚
â”‚    â”‚  (disabled)       â”‚                  â”‚  Text      â”‚  â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ” Authorization Decision Tree

```
                     START: User submits Pemasok
                            â”‚
                            â–¼
                   Is Role R04 or R09?
                    /             \
                  YES              NO
                  /                 \
          â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
          â”‚  Continue  â”‚       â”‚   REJECT   â”‚
          â”‚  Check     â”‚       â”‚            â”‚
          â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜       â”‚ "Hanya     â”‚
                 â”‚              â”‚  Staf/Mngr â”‚
                 â”‚              â”‚  Pengadaan"â”‚
                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â–¼
         Is Jenis_Barang = 'bahan_baku'?
               /          \
             YES           NO
            /               \
    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ APPROVED  â”‚      â”‚  REJECTED  â”‚
    â”‚           â”‚      â”‚            â”‚
    â”‚ Save with â”‚      â”‚ "Pemasok   â”‚
    â”‚ Pemasok   â”‚      â”‚  hanya utk â”‚
    â”‚           â”‚      â”‚  bahan_baku"
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“± Frontend vs Backend Validation

### CREATE PAGE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  CREATE.TSX (FRONTEND)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  User Role Check:                                       â”‚
â”‚  canInputSupplier() = (role === 'R04' || 'R09')        â”‚
â”‚                                                         â”‚
â”‚  â”œâ”€ TRUE  â†’ Show Dropdown (can select pemasok)         â”‚
â”‚  â””â”€ FALSE â†’ Show Warning Panel (can't select)          â”‚
â”‚                                                         â”‚
â”‚  Form Submit â†“                                          â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            PENGADAANCONTROLLER.STORE() (BACKEND)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Custom Validator Check (if pemasok_id submitted):     â”‚
â”‚                                                         â”‚
â”‚  1. Is user role R04 or R09?                           â”‚
â”‚     âœ“ YES â†’ Continue                                    â”‚
â”‚     âœ— NO â†’ Add error "Hanya Staf/Manajer..."          â”‚
â”‚                                                         â”‚
â”‚  2. Is item jenis_barang = 'bahan_baku'?               â”‚
â”‚     âœ“ YES â†’ Continue                                    â”‚
â”‚     âœ— NO â†’ Add error "Pemasok hanya utk bahan_baku"   â”‚
â”‚                                                         â”‚
â”‚  3. Does pemasok_id exist in DB?                       â”‚
â”‚     âœ“ YES â†’ Create pengadaan with pemasok             â”‚
â”‚     âœ— NO â†’ Add validation error "not found"            â”‚
â”‚                                                         â”‚
â”‚  All pass â†’ Store pengadaan                            â”‚
â”‚  Any fail â†’ Return errors to form                      â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### EDIT PAGE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   EDIT.TSX (FRONTEND)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Authorization Check:                                   â”‚
â”‚  canEditSupplier() =                                    â”‚
â”‚    (role === 'R04' || 'R09') &&                        â”‚
â”‚    (status === 'disetujui_gudang')                     â”‚
â”‚                                                         â”‚
â”‚  â”œâ”€ TRUE  â†’ Show Dropdown (can edit pemasok)          â”‚
â”‚  â””â”€ FALSE â†’ Show Read-only Text (can't edit)          â”‚
â”‚                                                         â”‚
â”‚  Form Submit â†“                                          â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PENGADAANCONTROLLER.UPDATE() (BACKEND)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                         â”‚
â”‚  Authorization Check (if pemasok_id in request):       â”‚
â”‚                                                         â”‚
â”‚  1. Is user role R04 or R09?                           â”‚
â”‚     âœ“ YES â†’ Continue                                    â”‚
â”‚     âœ— NO â†’ Return 302 "Hanya Staf/Manajer..."         â”‚
â”‚                                                         â”‚
â”‚  2. Is status 'disetujui_gudang'?                      â”‚
â”‚     âœ“ YES â†’ Continue                                    â”‚
â”‚     âœ— NO â†’ Return 302 "Status hrs disetujui_gudang"  â”‚
â”‚                                                         â”‚
â”‚  3. Is item jenis_barang = 'bahan_baku'?               â”‚
â”‚     âœ“ YES â†’ Continue & Update                          â”‚
â”‚     âœ— NO â†’ Return 302 "Hanya utk bahan_baku"          â”‚
â”‚                                                         â”‚
â”‚  All pass â†’ Update pengadaan with pemasok             â”‚
â”‚  Any fail â†’ Return error with flash message            â”‚
â”‚                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ¨ UI/UX Flow

### Scenario 1: User is Admin (R01) - Create Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tambah Pengadaan (Create)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Item: Bahan Baku Emas 99%          â”‚
â”‚  Qty: 10 kg                         â”‚
â”‚                                     â”‚
â”‚  Pemasok:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  âš  Hanya Staf/Manajer        â”‚  â”‚
â”‚  â”‚  Pengadaan yang dapat input   â”‚  â”‚
â”‚  â”‚  pemasok.                     â”‚  â”‚
â”‚  â”‚                               â”‚  â”‚
â”‚  â”‚  Hubungi Staf Pengadaan       â”‚  â”‚
â”‚  â”‚  untuk mengalokasikan         â”‚  â”‚
â”‚  â”‚  pemasok setelah pengadaan    â”‚  â”‚
â”‚  â”‚  dibuat.                      â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                     â”‚
â”‚  [Simpan] [Batal]                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: Pengadaan created, but pemasok empty
â†’ Staf Pengadaan (R04) will allocate pemasok later
```

### Scenario 2: User is Staf Pengadaan (R04) - Create Page

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tambah Pengadaan (Create)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Item: Bahan Baku Emas 99%          â”‚
â”‚  Qty: 10 kg                         â”‚
â”‚                                     â”‚
â”‚  Pemasok:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â–¼ Pilih Pemasok              â–¼ â”‚ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ PT. Mitra Jaya               âœ“ â”‚ â”‚
â”‚  â”‚ CV. Emas Makmur                â”‚ â”‚
â”‚  â”‚ PT. Gold Supplier Inc.          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  [Simpan] [Batal]                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Result: Can select pemasok â†’ Pengadaan created with pemasok filled
```

### Scenario 3: Staf Pengadaan - Edit Page (Status = disetujui_gudang)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ubah Pengadaan (Edit)              â”‚
â”‚  Status: Disetujui Gudang           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Item: Bahan Baku Emas 99%          â”‚
â”‚                                     â”‚
â”‚  Pemasok:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ â–¼ PT. Mitra Jaya             â–¼ â”‚ â”‚ â† EDITABLE
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ PT. Mitra Jaya               âœ“ â”‚ â”‚
â”‚  â”‚ CV. Emas Makmur                â”‚ â”‚
â”‚  â”‚ PT. Gold Supplier Inc.          â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                     â”‚
â”‚  [Simpan] [Batal]                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status = disetujui_gudang âœ“ â†’ Can edit pemasok
```

### Scenario 4: Staf Pengadaan - Edit Page (Status = pending)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ubah Pengadaan (Edit)              â”‚
â”‚  Status: Pending                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚  Item: Bahan Baku Emas 99%          â”‚
â”‚                                     â”‚
â”‚  Pemasok:                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚  â”‚ PT. Mitra Jaya                  â”‚ â”‚ â† READ-ONLY
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â”‚
â”‚                                     â”‚
â”‚  Info: Pemasok hanya bisa diubah    â”‚
â”‚  saat status "Disetujui Gudang"     â”‚
â”‚                                     â”‚
â”‚  [Simpan] [Batal]                   â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Status â‰  disetujui_gudang â†’ Cannot edit pemasok
```

## ğŸ”„ Complete User Journey

```
ADMIN/GUDANG (R01, R02, R07)           STAF PENGADAAN (R04, R09)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•           â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Create Pengadaan
   â”œâ”€ Add Bahan Baku Items
   â”œâ”€ See Warning (no pemasok dropdown)
   â””â”€ Submit â†’ Pengadaan created
      (pemasok empty)
                                       2. Edit Pengadaan
                                          Status: pending
                                          â”œâ”€ View Items
                                          â””â”€ Wait for status change

      3. Approval process...
         Status changes: pending
         â†’ disetujui_gudang
                                       4. Edit Pengadaan
                                          Status: disetujui_gudang
                                          â”œâ”€ See Pemasok Dropdown (editable)
                                          â”œâ”€ Select Pemasok for each item
                                          â””â”€ Submit â†’ Pemasok allocated

5. Rest of approval flow
   Status: disetujui_gudang
   â†’ disetujui_pengadaan
   â†’ disetujui_keuangan
   â†’ etc...
```

## ğŸ“Š Role-Based Access Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Role ID            â”‚ Can Creatâ”‚ Can Inp Pemasokâ”‚ Can Edit Pemasok â”‚
â”‚                    â”‚   ? â”‚ Createâ”‚ (disetujui_gud)â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ R01 (Admin)        â”‚   âœ“      â”‚      âœ—        â”‚       âœ—         â”‚
â”‚ R02 (Staf Gudang)  â”‚   âœ“      â”‚      âœ—        â”‚       âœ—         â”‚
â”‚ R04 (Staf Pengadaa)â”‚   âœ“      â”‚      âœ“        â”‚       âœ“         â”‚
â”‚ R06 (Staf Keuangan)â”‚   âœ—      â”‚      âœ—        â”‚       âœ—         â”‚
â”‚ R07 (Manajer Gudang)â”‚  âœ“      â”‚      âœ—        â”‚       âœ—         â”‚
â”‚ R09 (Manajer Pengad)â”‚  âœ“      â”‚      âœ“        â”‚       âœ“         â”‚
â”‚ R10 (Manajer Keuang)â”‚  âœ—      â”‚      âœ—        â”‚       âœ—         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend:
  âœ“ = Can do this action
  âœ— = Cannot do this action (hidden/disabled/error)
```

## ğŸ›¡ï¸ Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         LAYER 1: FRONTEND (React Component)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Show/hide dropdown based on role                      â”‚
â”‚ â€¢ Display warning messages for unauthorized users       â”‚
â”‚ â€¢ UX helper (not security!)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LAYER 2: BACKEND VALIDATION (Laravel Validator)      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Check user role (R04/R09)                             â”‚
â”‚ â€¢ Check item type (bahan_baku)                          â”‚
â”‚ â€¢ Return validation errors if unauthorized              â”‚
â”‚ â€¢ Real security check!                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LAYER 3: DATABASE (Primary Keys, Foreign Keys)        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Pemasok_id must exist (FK constraint)                 â”‚
â”‚ â€¢ Pengadaan_id must be valid (PK)                       â”‚
â”‚ â€¢ Data integrity at DB level                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

**Note**: All three layers work together. Frontend makes UX better, Backend enforces real security, Database maintains data integrity.
